<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Landing Page</title>  <style>
    /* === CSS VARIABLES FOR THEMING === */    :root {
      /* Light Mode (Default) */
      --bg-primary: #FFFFFF;
      --bg-secondary: #F8F9FA;
      --bg-tertiary: #F5F5F5;
      --text-primary: #333333;
      --text-secondary: #6B7280;
      --text-accent: #8B5CF6;
      --border-color: #E0E0E0;
      --shadow-light: rgba(0,0,0,0.08);
      --shadow-medium: rgba(0,0,0,0.1);      --button-gradient-start: #8B5CF6;
      --button-gradient-end: #A855F7;
      --button-shadow: rgba(139, 92, 246, 0.3);
      --button-hover-glow: rgba(139, 92, 246, 0.6);
      --button-text-selected: #FFFFFF;
      --button-hover-border: rgba(139, 92, 246, 0.4);
      --button-hover-gradient-center: rgba(139, 92, 246, 0.4);
      --button-hover-gradient-mid: rgba(139, 92, 246, 0.2);
      --button-active-gradient-center: rgba(255, 255, 255, 0.3);
      --button-active-gradient-mid: rgba(255, 255, 255, 0.1);
      --switch-active: #8B5CF6;
      --priority-low: #4CAF50;
      --priority-medium: #FFC107;
      --priority-high: #F44336;
      --button-disabled-bg: #E5E7EB;
      --button-disabled-text: #9CA3AF;
    }    /* Dark Mode */
    [data-theme="dark"] {
      --bg-primary: #0D0B14;
      --bg-secondary: #1A1625;
      --bg-tertiary: #211D30;
      --text-primary: #E0E0E0;
      --text-secondary: #A0A0A0;
      --text-accent: #63FFDA;
      --border-color: #4F4B68;
      --shadow-light: rgba(33,29,48,0.45);
      --shadow-medium: rgba(0,0,0,0.7);      --button-gradient-start: #63FFDA;
      --button-gradient-end: #63FFDA;
      --button-shadow: rgba(99, 255, 218, 0.3);
      --button-hover-glow: rgba(99, 255, 218, 1);
      --button-text-selected: #000000;
      --button-hover-border: rgba(99, 255, 218, 0.5);
      --button-hover-gradient-center: rgba(99, 255, 218, 0.4);
      --button-hover-gradient-mid: rgba(99, 255, 218, 0.2);
      --button-active-gradient-center: rgba(0, 0, 0, 0.3);
      --button-active-gradient-mid: rgba(0, 0, 0, 0.1);
      --switch-active: #A076F9;
      --priority-low: #4CAF50;
      --priority-medium: #FFC107;
      --priority-high: #F44336;
      --button-disabled-bg: #4F4B68;
      --button-disabled-text: #6B7280;
    }

    /* === GLOBAL RESET & BASE === */
    * { box-sizing: border-box; }
      body {
      background: var(--bg-primary);
      color: var(--text-primary);
      font-family: "Poppins", sans-serif;
      margin: 0;
      padding-top: 40px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* === LAYOUT === */
    .main-content {
      margin-left: 60px;
      padding: 0 40px;
    }

    h1 {
      margin-bottom: 30px;
      font-size: 2em;
    }    /* === SIDEBAR === */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      width: 60px;
      background: var(--bg-tertiary);
      border-right: 1px solid var(--border-color);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 0;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .sidebar-nav {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
    }

    .sidebar a {
      color: var(--text-accent);
      font-size: 24px;
      margin: 16px 0;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .sidebar a:hover {
      color: var(--text-accent);
      transform: scale(1.1);
      filter: brightness(1.2);
    }

    .sidebar a svg {
      width: 24px;
      height: 24px;
      fill: none;
      stroke: var(--text-accent);
      stroke-width: 2;
      transition: all 0.3s ease;
    }

    .sidebar a:hover svg {
      stroke: var(--text-accent);
      filter: brightness(1.2);
    }    /* === QUICK ADD BUTTON === */
    .open-popup-btn {
      position: fixed;
      top: 16px;
      right: 16px;
      width: 32px;
      height: 32px;
      background: none;
      border: none;
      cursor: pointer;
      z-index: 1000;
      color: var(--text-accent);
      padding: 0;
      transition: all 0.3s ease;
    }

    .open-popup-btn:hover {
      color: var(--text-accent);
      transform: scale(1.1);
      filter: brightness(1.2);
    }

    .open-popup-btn svg {
      width: 100%;
      height: 100%;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
    }    /* === DARK MODE TOGGLE === */
    .theme-toggle {
      width: 32px;
      height: 32px;
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-accent);
      padding: 0;
      margin-bottom: 8px;
      transition: all 0.3s ease;
    }

    .theme-toggle:hover {
      color: var(--text-accent);
      transform: scale(1.1);
      filter: brightness(1.2);
    }    .theme-toggle svg {
      width: 24px;
      height: 24px;
      stroke: var(--text-accent);
      stroke-width: 2;
      fill: none;
      transition: stroke 0.3s ease;
    }

    .theme-toggle .sun-icon {
      display: block;
    }

    .theme-toggle .moon-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .sun-icon {
      display: none;
    }

    [data-theme="dark"] .theme-toggle .moon-icon {
      display: block;
    }

    /* === TASK INPUT SYSTEM === */
    .task-input {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 0;
      width: 100%;
    }

    .priority-select { 
      gap: 6px; 
      margin-right: 6px; 
    }    .priority-btn { 
      width: 16px; 
      height: 16px; 
      border: none; 
      border-radius: 4px; 
      cursor: pointer; 
      opacity: 0.6; 
      transition: opacity 0.3s ease;
    }
    .priority-btn.selected { opacity: 1; }
    .priority-btn.low { background: var(--priority-low); }
    .priority-btn.med { background: var(--priority-medium); }
    .priority-btn.high { background: var(--priority-high); }.task-input input[type="text"] {
      min-width: 0;
      width: 100%;
      font-size: 15px;
      height: 36px;
      padding: 7px 10px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    }    .task-input input[type="number"] {
      width: 54px;
      min-width: 0;
      font-size: 14px;
      padding: 4px 6px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    }.task-input button, 
    .task-dropdown summary.options-btn {
      background: none;
      border: 1px solid transparent;
      color: #8B5CF6;
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      outline: none;
      box-shadow: none;
      height: 42px;
      padding: 14px 18px;
      font-size: 14px;
      margin-left: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }

    .task-input button.active,
    .task-dropdown summary.options-btn.active {
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      color: #FFFFFF;
      border: 1px solid #8B5CF6;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
    }    .task-input button:not(.active):hover,
    .task-dropdown summary.options-btn:hover {
      background-color: transparent;
      color: #8B5CF6;
      border-color: transparent;
      box-shadow: 0 0 12px rgba(139, 92, 246, 0.6);
      transform: translateY(-1px);
    }

    .task-input button { 
      margin-left: 8px; 
    }

    /* === DROPDOWN SYSTEM === */
    .task-dropdown { 
      position: relative; 
      margin-left: 0; 
    }

    .task-dropdown summary.options-btn { 
      list-style: none; 
      display: flex; 
      align-items: center; 
      font-family: inherit; 
    }

    .task-dropdown summary::-webkit-details-marker { 
      display: none; 
    }    .task-dropdown-content {
      position: absolute;
      top: calc(100% + 4px);
      left: unset;
      right: 0;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      padding: 8px;
      border-radius: 4px;
      box-shadow: 0 4px 12px var(--shadow-medium);
      display: none;
      font-family: inherit;
      font-size: 14px;
      font-weight: 600;
      min-width: 170px;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .task-dropdown[open] .task-dropdown-content { 
      display: block; 
    }    .task-dropdown-content label { 
      display: flex; 
      align-items: center; 
      gap: 4px; 
      color: var(--text-primary); 
      font-size: 14px; 
      margin-bottom: 2px; 
    }    .task-dropdown-content input[type="number"] {
      width: 54px;
      min-width: 0;
      font-size: 14px;
      padding: 4px 6px;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: border-color 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    }

    /* === SWITCH SYSTEM === */
    .switch { 
      position: relative; 
      display: inline-block; 
      width: 32px; 
      height: 18px; 
      margin-left: 6px; 
    }

    .switch input { 
      opacity: 0; 
      width: 0; 
      height: 0; 
    }

    .slider { 
      position: absolute; 
      cursor: pointer; 
      top: 0; 
      left: 0; 
      right: 0; 
      bottom: 0; 
      background: #4F4B68; 
      border-radius: 34px; 
      transition: .4s; 
    }

    .slider:before { 
      position: absolute; 
      content: ''; 
      height: 14px; 
      width: 14px; 
      left: 2px; 
      bottom: 2px; 
      background: #FFF; 
      border-radius: 50%; 
      transition: .4s; 
    }    .switch input:checked + .slider { 
      background: #8B5CF6; 
    }

    .switch input:checked + .slider:before { 
      transform: translateX(14px); 
    }    /* === MODAL SYSTEM === */
    #quickAddModal {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 4px 16px var(--shadow-medium);
      position: fixed;
      top: 60px;
      right: 16px;
      width: 370px;
      max-width: 95vw;
      z-index: 2000;
      display: none;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }    .weekly-review-modal {
      background: var(--bg-secondary) !important;
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      box-shadow: 0 8px 32px var(--shadow-medium);
      padding: 32px 32px 24px 32px;
      max-width: 480px;
      width: 95vw;
      min-height: 320px;
      z-index: 3000;
      text-align: left;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }    .weekly-review-modal h2 {
      color: #8B5CF6;
      font-size: 1.25em;
      font-weight: 600;
      margin: 0 0 18px 0;
    }    #weeklyReviewText {
      width: 100%;
      min-height: 140px;
      background: var(--bg-primary);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 14px 16px;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      margin-bottom: 0;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
      resize: vertical;
      box-sizing: border-box;
    }    #weeklyReviewText::placeholder {
      color: var(--text-secondary);
      opacity: 1;
      transition: color 0.3s ease;
    }#saveWeeklyReviewBtn {
      background: linear-gradient(135deg, #8B5CF6, #A855F7);
      color: #FFFFFF;
      border: none;
      border-radius: 6px;
      padding: 8px 22px;
      font-weight: 600;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
    }    #saveWeeklyReviewBtn:disabled {
      background: var(--button-disabled-bg);
      color: var(--button-disabled-text);
      cursor: not-allowed;
      box-shadow: none;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    #closeWeeklyReviewBtn {
      background: none;
      color: var(--text-secondary);
      border: none;
      border-radius: 6px;
      padding: 8px 22px;
      font-weight: 600;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    @media (max-width: 600px) {
      .weekly-review-modal { 
        padding: 18px 6vw 18px 6vw; 
      }
    }    /* === WIDGET COMPONENTS === */    .widget-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 18px;
      box-shadow: 0 8px 32px var(--shadow-light);
      padding: 28px 24px 18px 24px;
      min-width: 0;
      min-height: 340px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .widget-placeholder {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      font-size: 1.2rem;
      transition: color 0.3s ease;
    }

    .widget-title {
      text-align: center;
      color: var(--text-accent);
      font-weight: 600;
      margin-bottom: 18px;
      font-size: 1.18rem;
      transition: color 0.3s ease;
    }

    .landing-timeframe-controls {
      text-align: center;
      margin-bottom: 12px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }    .landing-timeframe-controls button {
      background: none;
      border: 1px solid transparent;
      color: var(--text-accent);
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
      padding: 4px 14px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9em;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      --mouse-x: 50%;
      --mouse-y: 50%;
    }

    .landing-timeframe-controls button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(
        circle at var(--mouse-x) var(--mouse-y),
        var(--button-hover-gradient-center) 0%,
        var(--button-hover-gradient-mid) 30%,
        transparent 60%
      );
      opacity: 0;
      transition: opacity 0.3s ease;
      border-radius: 6px;
      z-index: 1;
    }

    .landing-timeframe-controls button:hover::before {
      opacity: 1;
    }

    .landing-timeframe-controls button span {
      position: relative;
      z-index: 2;
    }

    .landing-timeframe-controls button.active,
    .landing-timeframe-controls button.selected {
      background: linear-gradient(135deg, var(--button-gradient-start), var(--button-gradient-end));
      color: var(--button-text-selected);
      border-color: var(--text-accent);
      box-shadow: 0 4px 15px var(--button-shadow);
    }

    .landing-timeframe-controls button.active::before,
    .landing-timeframe-controls button.selected::before {
      background: radial-gradient(
        circle at var(--mouse-x) var(--mouse-y),
        var(--button-active-gradient-center) 0%,
        var(--button-active-gradient-mid) 30%,
        transparent 60%
      );
      opacity: 0.7;
    }

    .landing-timeframe-controls button.active:hover::before,
    .landing-timeframe-controls button.selected:hover::before {
      opacity: 1;
    }

    .landing-timeframe-controls button:hover:not(.active):not(.selected) {
      color: var(--text-accent);
      border-color: var(--button-hover-border);
      box-shadow: 0 0 12px var(--button-hover-glow);
      transform: translateY(-1px);
    }

    /* === CIRCULAR BUDGET PROGRESS WIDGET === */
    .budget-progress-widget {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      position: relative;
    }

    .circular-progress-container {
      position: relative;
      width: 200px;
      height: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .circular-progress-svg {
      transform: rotate(-90deg);
      width: 100%;
      height: 100%;
    }

    .progress-circle-bg {
      fill: none;
      stroke: var(--bg-tertiary);
      stroke-width: 8;
      transition: stroke 0.3s ease;
    }

    .progress-circle-fill {
      fill: none;
      stroke: var(--text-accent);
      stroke-width: 8;
      stroke-linecap: round;
      stroke-dasharray: 0 628;
      transition: stroke-dasharray 0.8s ease-in-out, stroke 0.3s ease;
    }

    .progress-circle-fill.over-budget {
      stroke: var(--priority-high);
    }

    .circular-progress-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: var(--text-primary);
    }

    .progress-amount {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--text-accent);
      margin-bottom: 4px;
      transition: color 0.3s ease;
    }

    .progress-amount.over-budget {
      color: var(--priority-high);
    }

    .progress-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .budget-summary {
      text-align: center;
      width: 100%;
    }

    .budget-summary-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      padding: 0 20px;
    }

    .budget-summary-label {
      color: var(--text-secondary);
      font-size: 0.9rem;
      font-weight: 500;
    }

    .budget-summary-amount {
      font-family: 'Courier New', monospace;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .budget-summary-amount.total {
      color: var(--text-accent);
    }

    .budget-summary-amount.remaining {
      color: #10b981;
    }

    .budget-summary-amount.remaining.negative {
      color: var(--priority-high);
    }

    .budget-month-display {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      padding: 8px 16px;
      margin-bottom: 16px;
      color: var(--text-primary);
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

  </style>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>  <nav class="sidebar">
    <div class="sidebar-nav">
      <a href="Landing Page.html">
        <svg viewBox="0 0 24 24">
          <path d="M3 10L12 3l9 7v11a1 1 0 0 1-1 1h-6v-7h-4v7H4a1 1 0 0 1-1-1V10z"/>
        </svg>
      </a>
      <a href="Personal Finance Tracker.html">
        <svg viewBox="0 0 24 24">
          <polyline points="3 17 8 12 13 16 21 4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
      <a href="Productivity Tracker.html">
        <svg viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="9"/>
          <polyline points="12 7 12 12 15 15" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </a>
    </div>
    
    <!-- Theme Toggle Button -->
    <button id="themeToggle" title="Toggle Dark/Light Mode" class="theme-toggle">
      <svg viewBox="0 0 24 24" class="sun-icon">
        <circle cx="12" cy="12" r="5"/>
        <line x1="12" y1="1" x2="12" y2="3"/>
        <line x1="12" y1="21" x2="12" y2="23"/>
        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
        <line x1="1" y1="12" x2="3" y2="12"/>
        <line x1="21" y1="12" x2="23" y2="12"/>
        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
      </svg>
      <svg viewBox="0 0 24 24" class="moon-icon" style="display: none;">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
      </svg>
    </button>
  </nav>

  <!-- Quick Add Task Button & Modal -->
  <button id="openQuickAddBtn" title="Quick Add Task" class="open-popup-btn">
    <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
  </button>
  <div id="quickAddModal">
    <div class="task-input">
      <div class="priority-select" id="quickPrioritySelect">
        <button class="priority-btn low selected" data-priority="low" title="Low"></button>
        <button class="priority-btn med" data-priority="med" title="Medium"></button>
        <button class="priority-btn high" data-priority="high" title="High"></button>
      </div>
      <input id="quickTaskText" type="text" placeholder="add task">
      <details class="task-dropdown">
        <summary class="options-btn">Options</summary>
        <div class="task-dropdown-content">
          <label>Time Allotted<input id="quickTimeAllotted" type="number" min="0" placeholder="hrs"></label>
          <label>Difficulty</label>
          <label class="switch">
            <input id="quickDifficulty" type="checkbox">
            <span class="slider"></span>
          </label>
          <span id="quickDiffLabel">Easy</span>
        </div>
      </details>
      <button id="quickAddConfirm">Add</button>
    </div>
  </div>

  <!-- Weekly Review Modal -->
  <dialog id="weeklyReviewModal" class="weekly-review-modal">
    <form method="dialog" style="margin:0;">
      <h2>What did you get done this week?</h2>
      <textarea id="weeklyReviewText" placeholder="add notes"></textarea>
      <div style="display:flex; justify-content:flex-end; gap:12px; margin-top:10px;">
        <button id="saveWeeklyReviewBtn" disabled style="margin-right:0;">Save</button>
        <button id="closeWeeklyReviewBtn" type="button">Close</button>
      </div>
    </form>
  </dialog>
  <div class="main-content">
    <h1>Dashboard Overview</h1>    <div class="dashboard-widgets-row" style="display: flex; gap: 32px; margin-top: 32px;">      <!-- Overall Performance Widget (from Productivity Tracker) -->
      <div class="widget-card" style="flex:1;">
        <h2 class="widget-title">Overall Performance</h2>        <div class="timeframe-controls landing-timeframe-controls">
          <button class="timeframe-btn active" data-timeframe="day"><span>Day</span></button>
          <button class="timeframe-btn" data-timeframe="week"><span>Week</span></button>
          <button class="timeframe-btn" data-timeframe="month"><span>Month</span></button>
          <button class="timeframe-btn" data-timeframe="year"><span>Year</span></button>
        </div>
        <div style="flex:1; min-height:220px;">
          <canvas id="landingOverallPerformanceChart" style="width:100%;height:220px;"></canvas>        </div>
      </div>      <!-- Budget Progress Widget -->
      <div class="widget-card" style="flex:1;">
        <h2 class="widget-title">Monthly Budget</h2>
        <div class="budget-month-display" id="budgetMonthDisplay">
          May 2025
        </div>
        <div class="budget-progress-widget">
          <div class="circular-progress-container">
            <svg class="circular-progress-svg" viewBox="0 0 200 200">
              <circle class="progress-circle-bg" cx="100" cy="100" r="90"></circle>
              <circle class="progress-circle-fill" cx="100" cy="100" r="90" id="budgetProgressCircle"></circle>
            </svg>
            <div class="circular-progress-text">
              <div class="progress-amount" id="budgetSpentAmount">$0</div>
              <div class="progress-label">Spent</div>
            </div>
          </div>
          <div class="budget-summary">
            <div class="budget-summary-row">
              <span class="budget-summary-label">Total Budget:</span>
              <span class="budget-summary-amount total" id="budgetTotalAmount">$0</span>
            </div>
            <div class="budget-summary-row">
              <span class="budget-summary-label">Remaining:</span>
              <span class="budget-summary-amount remaining" id="budgetRemainingAmount">$0</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="theme.js"></script>
  <script>
    // === QUICK ADD MODAL FUNCTIONALITY ===
    const openQuick = document.getElementById('openQuickAddBtn');
    const quickModal = document.getElementById('quickAddModal');
    const quickText = document.getElementById('quickTaskText');
    const quickTime = document.getElementById('quickTimeAllotted');
    const quickDiff = document.getElementById('quickDifficulty');
    const quickLabel = document.getElementById('quickDiffLabel');
    let quickPri = 'low';// Show modal
    openQuick.addEventListener('click', () => {
      quickModal.style.display = quickModal.style.display === 'none' ? 'block' : 'none';
    });

    // Hide modal by default (on DOMContentLoaded)
    document.addEventListener('DOMContentLoaded', () => {
      quickModal.style.display = 'none';
    });

    // Hide modal when clicking outside of it
    document.addEventListener('click', (e) => {
      if (!quickModal.contains(e.target) && !openQuick.contains(e.target)) {
        quickModal.style.display = 'none';
      }
    });

    // Priority
    document.querySelectorAll('#quickPrioritySelect .priority-btn').forEach(b => b.addEventListener('click', () => {
      document.querySelectorAll('#quickPrioritySelect .priority-btn').forEach(n=>n.classList.remove('selected'));
      b.classList.add('selected'); quickPri = b.dataset.priority;
    }));    // Difficulty toggle
    quickDiff.addEventListener('change', e => quickLabel.textContent = e.target.checked ? 'Hard' : 'Easy');

    // Confirm
    document.getElementById('quickAddConfirm').addEventListener('click', () => {
      const text = quickText.value.trim(); 
      if (!text) return;
      
      const payload = { 
        type:'addTask', 
        text, 
        timeAllotted: parseInt(quickTime.value)||0,
        difficulty: quickDiff.checked?'hard':'easy', 
        priority: quickPri 
      };
      
      // Only use localStorage for cross-tab sync (no window.open)
      localStorage.setItem('productivityQuickAdd', JSON.stringify(payload));
      
      // Clear inputs and close modal
      quickText.value = '';
      quickTime.value = '';
      quickDiff.checked = false;
      quickLabel.textContent = 'Easy';
      document.querySelectorAll('#quickPrioritySelect .priority-btn').forEach(b => b.classList.remove('selected'));
      document.querySelector('#quickPrioritySelect .priority-btn.low').classList.add('selected');
      quickPri = 'low';
      quickModal.style.display = 'none';
    });

    // Close on backdrop
    quickModal.addEventListener('click', e=>{ if(e.target===quickModal) {
      quickModal.close();
      quickModal.style.display = 'none';
    }});

    // Weekly Review logic
    const oldCard = document.querySelector('.weekly-review-card');
    if (oldCard) oldCard.remove();

    const weeklyReviewModal = document.getElementById('weeklyReviewModal');
    const weeklyReviewText = document.getElementById('weeklyReviewText');
    const saveWeeklyReviewBtn = document.getElementById('saveWeeklyReviewBtn');
    const closeWeeklyReviewBtn = document.getElementById('closeWeeklyReviewBtn');

    // Enable save button only if there is text
    weeklyReviewText.addEventListener('input', () => {
      saveWeeklyReviewBtn.disabled = weeklyReviewText.value.trim() === '';
    });

    // Save review to localStorage
    saveWeeklyReviewBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const review = weeklyReviewText.value.trim();
      if (review) {
        const weekKey = `weeklyReview_${new Date().getFullYear()}_${getWeekNumber(new Date())}`;
        localStorage.setItem(weekKey, review);
        weeklyReviewText.value = '';
        saveWeeklyReviewBtn.disabled = true;
        weeklyReviewModal.close();
      }
    });

    closeWeeklyReviewBtn.addEventListener('click', () => {
      weeklyReviewModal.close();
    });

    // Helper to get ISO week number
    function getWeekNumber(d) {
      d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
      const dayNum = d.getUTCDay() || 7;
      d.setUTCDate(d.getUTCDate() + 4 - dayNum);
      const yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
      return Math.ceil((((d - yearStart) / 86400000) + 1)/7);
    }

    // Show modal only on Fridays and pre-fill with saved review
    window.addEventListener('DOMContentLoaded', () => {
      const today = new Date();
      if (today.getDay() === 5) { // 5 = Friday
        const weekKey = `weeklyReview_${today.getFullYear()}_${getWeekNumber(today)}`;
        const savedReview = localStorage.getItem(weekKey) || '';
        weeklyReviewText.value = savedReview;
        saveWeeklyReviewBtn.disabled = savedReview.trim() === '';
        // Only show the modal if there are no saved notes for this week
        if (!savedReview.trim()) {
          weeklyReviewModal.showModal();
        }
      }
    });

    // --- LANDING PAGE OVERALL PERFORMANCE CHART ---
    const ctxLandingOverall = document.getElementById('landingOverallPerformanceChart').getContext('2d');
    const gradientLandingCyan = ctxLandingOverall.createLinearGradient(0, 0, 0, 300);
    gradientLandingCyan.addColorStop(0, 'rgba(99, 255, 218, 0.4)');
    gradientLandingCyan.addColorStop(1, 'rgba(99, 255, 218, 0)');

    const landingOverallChart = new Chart(ctxLandingOverall, {
      type: 'bar',
      data: {
        labels: [],
        datasets: [
          {
            type: 'bar',
            label: 'Low Assigned',
            data: [],
            backgroundColor: '#73BFFF',
            stack: 'assigned',
            borderRadius: 6,
            borderSkipped: 'bottom',
            barPercentage: 0.5
          },
          {
            type: 'bar',
            label: 'Med Assigned',
            data: [],
            backgroundColor: '#FFF000',
            stack: 'assigned',
            borderRadius: 6,
            borderSkipped: 'bottom',
            barPercentage: 0.5
          },
          {
            type: 'bar',
            label: 'High Assigned',
            data: [],
            backgroundColor: '#FF6B6B',
            stack: 'assigned',
            borderRadius: 6,
            borderSkipped: 'bottom',
            barPercentage: 0.5
          },
          {
            type: 'line',
            label: 'Tasks Assigned',
            data: [],
            borderColor: '#A0A0A0',
            borderDash: [6,6],
            fill: false,
            tension: 0.4,
            pointRadius: 0,
            yAxisID: 'y'
          },
          {
            type: 'line',
            label: 'Tasks Completed',
            data: [],
            borderColor: '#63FFDA',
            backgroundColor: gradientLandingCyan,
            fill: true,
            tension: 0.4,
            pointRadius: 0,
            pointBackgroundColor: '#63FFDA',
            pointBorderColor: '#1A1625',
            pointHoverRadius: 6,
            yAxisID: 'y'
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        elements: { bar: { borderRadius: 8, borderSkipped: false } },
        interaction: { mode: 'index', intersect: false },
        scales: {
          x: { stacked: true, grid: { display: false }, ticks: { color: '#A0A0A0' } },
          y: {
            beginAtZero: true,
            stacked: false,
            grid: { display: true, color: 'rgba(79, 75, 104, 0.3)', drawBorder: false },
            ticks: { color: '#A0A0A0', stepSize: 1 }
          }
        },
        plugins: {
          legend: { display: false },
          tooltip: {
            enabled: true,
            mode: 'index', intersect: false,
            displayColors: false,
            backgroundColor: '#211D30', titleColor: '#FFF', bodyColor: '#FFF', padding: 8,
            borderColor: '#63FFDA', borderWidth: 1,
            callbacks: {
              title: items => {
                const label = items[0].label;
                const now = new Date();
                if (landingChartRange === 'year') return label + ' ' + now.getFullYear();
                if (landingChartRange === 'month') return now.toLocaleString('default', { month: 'long' }) + ' ' + label + ', ' + now.getFullYear();
                return label;
              },
              label: ctx => `${ctx.dataset.label}: ${ctx.parsed.y}`
            }
          }
        }
      }
    });    // --- AGGREGATION LOGIC FOR LANDING PAGE OVERALL PERFORMANCE ---
    function aggregateLanding(range) {
      const tasks = JSON.parse(localStorage.getItem('productivityTasks')||'[]');
      const now = new Date();
      const currentYear = now.getFullYear();
      const currentMonth = now.getMonth();
      const currentDay = now.getDate();
      let labels, low, med, high, completed, assignedSum;
      
      if (range === 'year') {
        labels = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        low = Array(12).fill(0); med = Array(12).fill(0); high = Array(12).fill(0); completed = Array(12).fill(0);
        tasks.forEach(t => {
          const created = t.created ? new Date(t.created) : null;
          const completedAt = t.completedAt ? new Date(t.completedAt) : null;
          if (created && created.getFullYear() === currentYear) {
            const m = created.getMonth();
            // Only include data up to current month, or if it's current month, up to current day
            if (m < currentMonth || (m === currentMonth && created.getDate() <= currentDay)) {
              if (t.priority==='low') low[m]++; if (t.priority==='med') med[m]++; if (t.priority==='high') high[m]++;
            }
          }
          if (completedAt && completedAt.getFullYear() === currentYear) {
            const m = completedAt.getMonth();
            // Only include data up to current month, or if it's current month, up to current day
            if (m < currentMonth || (m === currentMonth && completedAt.getDate() <= currentDay)) {
              completed[m]++;
            }
          }
        });
        // Truncate labels and data to current month
        labels = labels.slice(0, currentMonth + 1);
        low = low.slice(0, currentMonth + 1);
        med = med.slice(0, currentMonth + 1);
        high = high.slice(0, currentMonth + 1);
        completed = completed.slice(0, currentMonth + 1);
        assignedSum = low.map((_,i)=>low[i]+med[i]+high[i]);
      } else if (range === 'month') {
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        const daysToShow = Math.min(currentDay, daysInMonth);
        labels = Array.from({ length: daysToShow }, (_, i) => (i + 1).toString());
        low = Array(daysToShow).fill(0); med = Array(daysToShow).fill(0); high = Array(daysToShow).fill(0); completed = Array(daysToShow).fill(0);
        tasks.forEach(t => {
          const created = t.created ? new Date(t.created) : null;
          const completedAt = t.completedAt ? new Date(t.completedAt) : null;
          if (created && created.getFullYear() === currentYear && created.getMonth() === currentMonth && created.getDate() <= currentDay) {
            const d = created.getDate() - 1;
            if (d < daysToShow) {
              if (t.priority==='low') low[d]++; if (t.priority==='med') med[d]++; if (t.priority==='high') high[d]++;
            }
          }
          if (completedAt && completedAt.getFullYear() === currentYear && completedAt.getMonth() === currentMonth && completedAt.getDate() <= currentDay) {
            const d = completedAt.getDate() - 1;
            if (d < daysToShow) {
              completed[d]++;
            }
          }
        });
        assignedSum = low.map((_,i)=>low[i]+med[i]+high[i]);      } else if (range === 'week') {
        // ISO week: Monday-Sunday
        const day = now.getDay(), iso = (day+6)%7;
        const start = new Date(now); start.setDate(now.getDate()-iso); start.setHours(0,0,0,0);
        const end   = new Date(start); end.setDate(start.getDate()+6); end.setHours(23,59,59,999);
        const currentDayOfWeek = iso; // Current day in ISO week (0=Monday, 6=Sunday)
        const daysToShow = currentDayOfWeek + 1; // Include current day
        labels = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'].slice(0, daysToShow);
        low = Array(daysToShow).fill(0); med = Array(daysToShow).fill(0); high = Array(daysToShow).fill(0); completed = Array(daysToShow).fill(0);
        tasks.forEach(t => {
          const created = t.created ? new Date(t.created) : null;
          const completedAt = t.completedAt ? new Date(t.completedAt) : null;
          if (created && created >= start && created <= now) { // Only up to current moment
            const i = (created.getDay()+6)%7;
            if (i < daysToShow) {
              if (t.priority==='low') low[i]++; if (t.priority==='med') med[i]++; if (t.priority==='high') high[i]++;
            }
          }
          if (completedAt && completedAt >= start && completedAt <= now) { // Only up to current moment
            const i = (completedAt.getDay()+6)%7;
            if (i < daysToShow) {
              completed[i]++;
            }
          }
        });
        assignedSum = low.map((_,i)=>low[i]+med[i]+high[i]);      } else { // day
        const currentHour = now.getHours();
        const hoursToShow = currentHour + 1; // Include current hour
        labels = Array.from({length:hoursToShow},(_,i)=>`${i}:00`);
        low = Array(hoursToShow).fill(0); med = Array(hoursToShow).fill(0); high = Array(hoursToShow).fill(0); completed = Array(hoursToShow).fill(0);
        tasks.forEach(t => {
          const created = t.created ? new Date(t.created) : null;
          const completedAt = t.completedAt ? new Date(t.completedAt) : null;
          if (created && isSameDay(created, now) && created.getHours() <= currentHour) {
            const h = created.getHours();
            if (h < hoursToShow) {
              if (t.priority==='low') low[h]++; if (t.priority==='med') med[h]++; if (t.priority==='high') high[h]++;
            }
          }
          if (completedAt && isSameDay(completedAt, now) && completedAt.getHours() <= currentHour) {
            const h = completedAt.getHours();
            if (h < hoursToShow) {
              completed[h]++;
            }
          }
        });
        assignedSum = low.map((_,i)=>low[i]+med[i]+high[i]);
      }
      return { labels, low, med, high, assignedSum, completed };
    }

    function isSameDay(a,b){ return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate(); }

    // --- Populate landing chart with productivity data from localStorage (default: year) ---
    let landingChartRange = 'year';
    function updateLandingOverallChart(range) {
      landingChartRange = range;
      const { labels, low, med, high, assignedSum, completed } = aggregateLanding(range);
      landingOverallChart.data.labels = labels;
      landingOverallChart.data.datasets[0].data = low;
      landingOverallChart.data.datasets[1].data = med;
      landingOverallChart.data.datasets[2].data = high;
      landingOverallChart.data.datasets[3].data = assignedSum;
      landingOverallChart.data.datasets[4].data = completed;
      landingOverallChart.update();
    }
    updateLandingOverallChart(landingChartRange);

    // --- Timeframe toggle logic for Overall Performance ---
    // Overall Performance toggles
    const overallBtns = document.querySelectorAll('.landing-timeframe-controls .timeframe-btn');
    overallBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        overallBtns.forEach(b => { b.classList.remove('active'); b.classList.remove('selected'); });
        btn.classList.add('active');
        updateLandingOverallChart(btn.dataset.timeframe);
      });    });

    // === ANIMATED GRADIENT EFFECT FOR TIMEFRAME BUTTONS ===
    function setupAnimatedTimeframeButtons() {
      const timeframeButtons = document.querySelectorAll('.landing-timeframe-controls button');
      
      timeframeButtons.forEach(button => {
        button.addEventListener('mousemove', (e) => {
          const rect = button.getBoundingClientRect();
          const x = ((e.clientX - rect.left) / rect.width) * 100;
          const y = ((e.clientY - rect.top) / rect.height) * 100;
          
          button.style.setProperty('--mouse-x', `${x}%`);
          button.style.setProperty('--mouse-y', `${y}%`);
        });
        
        button.addEventListener('mouseleave', () => {
          // Reset to center when mouse leaves
          button.style.setProperty('--mouse-x', '50%');
          button.style.setProperty('--mouse-y', '50%');
        });
      });
    }    // Initialize animated buttons
    setupAnimatedTimeframeButtons();    // === BUDGET PROGRESS WIDGET FUNCTIONALITY ===
    function updateBudgetProgressWidget() {
      const currentDate = new Date();
      const currentMonth = currentDate.getMonth();
      const currentYear = currentDate.getFullYear();
      
      // Update month display
      const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                         'July', 'August', 'September', 'October', 'November', 'December'];
      document.getElementById('budgetMonthDisplay').textContent = `${monthNames[currentMonth]} ${currentYear}`;
      
      // Get budget data from Personal Finance Tracker (correct localStorage key)
      const budgetData = JSON.parse(localStorage.getItem('financeBudgetData') || '{}');
      const monthKey = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}`;
      const monthBudgets = budgetData[monthKey] || {};
      
      // Get daily activity data from Personal Finance Tracker
      const dailyActivity = JSON.parse(localStorage.getItem('financeDailyActivity') || '{}');
      
      // Calculate totals
      let totalBudget = 0;
      let totalSpent = 0;
      
      // Sum up all budget categories from Personal Finance Tracker
      Object.values(monthBudgets).forEach(budget => {
        if (typeof budget === 'number') {
          totalBudget += budget;
        }
      });
      
      // Calculate spent amount using Personal Finance Tracker's dailyActivity data
      // This aggregates spending across all categories for the current month
      Object.keys(dailyActivity).forEach(dateKey => {
        if (dateKey.startsWith(monthKey)) { // Check if date belongs to current month
          const dayData = dailyActivity[dateKey];
          if (dayData && dayData.categories) {
            // Sum all category spending for this day
            Object.keys(dayData.categories).forEach(category => {
              const categorySpending = dayData.categories[category] || 0;
              totalSpent += categorySpending;
            });
          }
        }
      });
      
      // Update display elements
      document.getElementById('budgetTotalAmount').textContent = `$${totalBudget.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
      document.getElementById('budgetSpentAmount').textContent = `$${totalSpent.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
      
      const remaining = totalBudget - totalSpent;
      const remainingElement = document.getElementById('budgetRemainingAmount');
      remainingElement.textContent = `$${Math.abs(remaining).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
      
      // Update remaining amount styling
      remainingElement.className = 'budget-summary-amount remaining';
      if (remaining < 0) {
        remainingElement.classList.add('negative');
        remainingElement.textContent = `-$${Math.abs(remaining).toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
      }
      
      // Update circular progress
      const progressCircle = document.getElementById('budgetProgressCircle');
      const spentAmountElement = document.getElementById('budgetSpentAmount');
      
      if (totalBudget > 0) {
        const percentage = Math.min((totalSpent / totalBudget) * 100, 100);
        const circumference = 2 * Math.PI * 90; // radius = 90
        const dashArray = (percentage / 100) * circumference;
        
        progressCircle.style.strokeDasharray = `${dashArray} ${circumference}`;
        
        // Change color if over budget
        if (totalSpent > totalBudget) {
          progressCircle.classList.add('over-budget');
          spentAmountElement.classList.add('over-budget');
        } else {
          progressCircle.classList.remove('over-budget');
          spentAmountElement.classList.remove('over-budget');
        }
      } else {
        // No budget set
        progressCircle.style.strokeDasharray = '0 628';
        progressCircle.classList.remove('over-budget');
        spentAmountElement.classList.remove('over-budget');
      }
    }

    // Initialize budget widget
    updateBudgetProgressWidget();    // Update budget widget when localStorage changes (for cross-tab sync)
    window.addEventListener('storage', (e) => {
      if (e.key === 'financeBudgetData' || e.key === 'financeDailyActivity') {
        updateBudgetProgressWidget();
      }
    });

    // Update budget widget every minute to catch any changes
    setInterval(updateBudgetProgressWidget, 60000);
  </script>
</body>
</html>